    <!DOCTYPE html>
<html lang="en-us">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		<meta name="description" content="The official blog of Minko Gechev">
		<meta name="generator" content="Hugo 0.22-DEV" />
		<title>Blogger image resize &middot; Minko Gechev&#39;s blog</title>
		<link rel="shortcut icon" href="http://blog.mgechev.com/images/favicon.ico">
		<link rel="stylesheet" href="http://blog.mgechev.com/css/style.css">
		<link rel="stylesheet" href="http://blog.mgechev.com/css/highlight.css">
		<link rel="stylesheet" href="http://blog.mgechev.com/css/firacode/fira.css">
		

		
		<link rel="stylesheet" href="http://blog.mgechev.com/css/font-awesome.min.css">
		

		
		<link href="http://blog.mgechev.com/index.xml" rel="alternate" type="application/rss+xml" title="Minko Gechev&#39;s blog" />
		
	</head>

    <body>
       <nav class="main-nav">
	
	
		<a href='http://blog.mgechev.com/'> <span class="arrow">←</span>Home</a>
	
	<a href='http://blog.mgechev.com/about'>About</a>
	<a href='http://blog.mgechev.com/talks'>Talks</a>
	<a href='http://blog.mgechev.com/post'>Archive</a>

	

	
	<a class="cta" href="http://blog.mgechev.com/index.xml">Subscribe</a>
	
</nav>


        <section id="wrapper">
            <article class="post">
                <header>
                    <h1>
                        Blogger image resize
                    </h1>
                    <h2 class="headline">
                    <a href="https://github.com/mgechev/blog.mgechev.com/tree/gh-pages/_posts/post/2011-07-17-blogger-image-resize.md">
                        <i class="fa fa-pencil-square-o"></i> Edit
                    </a>
                    · Jul 17, 2011 00:00
                    · 332 words
                    · 2 minutes read
                      <span class="tags">
                      
                      
                          
                              <a href="http://blog.mgechev.com/tags/blogger">blogger</a>
                          
                              <a href="http://blog.mgechev.com/tags/JavaScript">JavaScript</a>
                          
                              <a href="http://blog.mgechev.com/tags/Programming">Programming</a>
                          
                      
                      
                      </span>
                    </h2>
                </header>
                
                <section id="post-body">
                    <p>That&#8217;s my second post here and the first one which is going to have any sense. Today a friend of mine was fighting with Google&#8217;s blog system&#8230;He was posting some data with images in it. When he was setting width and height of images in the html editor they were being resized later after he post the article. When he tried to put any CSS restriction about picture&#8217;s width the effect was &#8211; picture flattened (because blogger was setting the picture height). I looked at the source for few minutes, stopped the JavaScript because I thought that it is the problem but there was no result&#8230;So I wrote a tiny script which deals with the problem. And here is it:</p>

<div class="highlight"><pre><code class="language-JavaScript" data-lang="JavaScript"><span></span>   
<span class="cm">/*</span>
<span class="cm">    Blogger image resize script Copyright (C) 2011  Minko Gechev (http://mgechev.com)</span>
<span class="cm">    This program comes with ABSOLUTELY NO WARRANTY; for details type http://www.gnu.org/licenses/gpl-3.0.html.</span>
<span class="cm">    This is free software, and you are welcome to redistribute it</span>
<span class="cm">    under certain conditions; type http://www.gnu.org/licenses/gpl-3.0.html for details.</span>
<span class="cm">*/</span>

<span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="c1">//Picture&#39;s maximum width</span>
    <span class="kd">var</span> <span class="nx">maxImageWidth</span> <span class="o">=</span> <span class="mi">500</span><span class="p">;</span>

    <span class="c1">//Posts content is in div with post-body class so I&#39;m performing resize for the pictures</span>
    <span class="c1">//which are in all divs from this kind</span>
    <span class="p">(</span><span class="kd">function</span> <span class="nx">performResize</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">container</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.post-body&#39;</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">container</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">getImages</span><span class="p">(</span><span class="nx">container</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
        <span class="p">}</span>
    <span class="p">})();</span>

    <span class="c1">//Recursively taking all images. I&#39;m using recursion because there might be any &#39;a&#39;, &#39;span&#39;...etc tag where is</span>
    <span class="c1">//the image. If I find any image tag then I&#39;m comparing image&#39;s width with the max width and if it&#39;s more resizing it.</span>
    <span class="kd">function</span> <span class="nx">getImages</span><span class="p">(</span><span class="nx">container</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">container</span><span class="p">.</span><span class="nx">tagName</span> <span class="o">===</span> <span class="s1">&#39;IMG&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">container</span><span class="p">).</span><span class="nx">width</span><span class="p">())</span> <span class="o">&gt;</span> <span class="nx">maxImageWidth</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">resizeImage</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">container</span><span class="p">));</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">container</span><span class="p">).</span><span class="nx">children</span><span class="p">().</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">$</span><span class="p">(</span><span class="nx">container</span><span class="p">).</span><span class="nx">children</span><span class="p">().</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">getImages</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">container</span><span class="p">).</span><span class="nx">children</span><span class="p">().</span><span class="nx">get</span><span class="p">(</span><span class="nx">i</span><span class="p">));</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>    
    <span class="p">}</span>

    <span class="c1">//Calculating maxImageWidth in percents.</span>
    <span class="kd">function</span> <span class="nx">resizeImage</span><span class="p">(</span><span class="nx">image</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">maxSizeInPercents</span> <span class="o">=</span> <span class="nx">maxImageWidth</span> <span class="o">/</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">image</span><span class="p">.</span><span class="nx">width</span><span class="p">());</span>
        <span class="kd">var</span> <span class="nx">newHeight</span> <span class="o">=</span> <span class="nx">maxSizeInPercents</span> <span class="o">*</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">image</span><span class="p">.</span><span class="nx">height</span><span class="p">());</span>
        <span class="nx">image</span><span class="p">.</span><span class="nx">width</span><span class="p">(</span><span class="nx">maxImageWidth</span><span class="p">);</span>
        <span class="nx">image</span><span class="p">.</span><span class="nx">height</span><span class="p">(</span><span class="nx">newHeight</span><span class="p">);</span>
    <span class="p">}</span>    
<span class="p">});</span>
</code></pre></div>


<p>I hope that it&rsquo;s going to be helpful for some of you.<br />
Greetings!</p>

                </section>
            </article>

            

            
                <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'mgechev';

     
    (function () {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
            

            

            <footer id="footer">
    <div class="by-author">with <i class="fa fa-heart" aria-hidden="true"></i> by Minko Gechev</div>
    <p class="small">
         © Copyright 2017  
    </p>
</footer>
        </section>

        <script src="http://blog.mgechev.com/js/main.js"></script>




  
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-18060688-3', 'auto');
ga('send', 'pageview');
</script>





    </body>
</html>
